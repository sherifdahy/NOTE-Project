<div class="p-3">
  <h4 class="fw-bold text-primary">โ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h4>
  <hr>

  <form [formGroup]="form" (ngSubmit)="handleSubmitForm()">
    <div class="row">
      <div class="col-md-4 mb-4">
        <label class="form-label">ุงููุฑุน</label>
        <select class="form-select" formControlName="branchId">
          <option *ngFor="let branch of branches" value="{{branch.id}}">{{branch.code}}</option>
        </select>
        <span class="text-danger" *ngIf="branchId?.invalid && branchId?.touched">ูุฌุจ ุงุฎุชูุงุฑ ุงููุฑุน</span>
      </div>
      <div class="col-md-4 mb-4">
        <label class="form-label">ุงุณู ุงูููุชุฌ</label>
        <input type="text" class="form-control" formControlName="name">
        <span class="text-danger" *ngIf="name?.invalid && name?.touched">ุงุณู ุงูููุชุฌ ูุทููุจ</span>
      </div>

    </div>
    <!-- Units Table -->
    <div>
      <div class="d-flex justify-content-between align-items-center">
        <h5 class="fw-bold text-secondary">ุงููุญุฏุงุช</h5>
        <button class="btn btn-success" type="button" (click)="openCreateProductUnitDialog()">ุงุถุงูุฉ ูุญุฏุฉ</button>
      </div>
      <table class="table table-striped table-hover mt-3" formArrayName="productUnits">
        <thead class="table-primary">
          <tr>
            <th class="col-1">#</th>
            <th class="col-4">ุงููุตู</th>
            <th class="col-2">ุงูููุฏ ุงูุฏุงุฎูู</th>
            <th class="col-2">ุงูููุฏ ุงูุนุงููู</th>
            <th class="col-1">ููุน ุงูููุฏ</th>
            <th class="col-1">ุงูุณุนุฑ</th>
            <th class="col-1">ุงููุญุฏุฉ</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let unit of productUnits.controls; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ unit.value.description }}</td>
            <td>{{ unit.value.internalCode }}</td>
            <td>{{ unit.value.globalCode }}</td>
            <td>{{ unit.value.globalCodeType }}</td>
            <td>{{ unit.value.unitPrice }}</td>
            <td>{{ unit.value.unitId }}</td>
            <td>
              <button type="button" (click)="handleDeleteProductUnit(i)" class="btn btn-sm btn-danger">๐๏ธ</button>
            </td>
          </tr>
          <!-- ุญุงูุฉ ูุงุถูุฉ -->
          <tr *ngIf="!productUnits || productUnits.length === 0">
            <td colspan="8" class="text-center text-muted py-4">
              ูุง ููุฌุฏ ูุญุฏุงุช ุญุงููุงู
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="text-start">
      <button type="submit" class="btn btn-primary px-4">
        โ ุญูุธ ุงูููุชุฌ
      </button>
    </div>
  </form>


</div>
