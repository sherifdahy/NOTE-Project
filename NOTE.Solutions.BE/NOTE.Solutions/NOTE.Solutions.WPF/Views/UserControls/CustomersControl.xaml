<UserControl x:Class="NOTE.Solutions.WPF.Views.UserControls.CustomersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:NOTE.Solutions.WPF.ViewModels"
             mc:Ignorable="d"
             FlowDirection="RightToLeft"
             d:DesignHeight="1080"
             d:DesignWidth="1920">


    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Search + Buttons -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <telerik:RadWatermarkTextBox
                Grid.Column="0"
                Height="38"
                FontFamily="Dubai"
                FontSize="15"
                WatermarkContent="بحث عن عميل..."
                Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                VerticalContentAlignment="Center"
                HorizontalAlignment="Stretch"
                telerik:StyleManager.Theme="Windows8Touch"/>

            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">

                <telerik:RadButton Width="40"
                                   Height="40"
                                   Margin="5,0,10,0"
                                   Command="{Binding DeleteAllCommand}"
                                   telerik:StyleManager.Theme="Fluent">
                    <Image Source="C:\ERP Files\icons8-delete-48.png" Width="22"/>
                </telerik:RadButton>

                <telerik:RadButton Width="40"
                                   Height="40"
                                   Command="{Binding ImportExcelCommand}"
                                   telerik:StyleManager.Theme="Fluent">
                    <Image Source="C:\ERP Files\icons8-excel-50.png" Width="22"/>
                </telerik:RadButton>

            </StackPanel>
        </Grid>

        <!-- Data Grid -->
        <telerik:RadGridView Grid.Row="1"
                             ItemsSource="{Binding Customers}"
                             AutoGenerateColumns="False"
                             CanUserGroupColumns="False"
                             ShowGroupPanel="False"
                             SelectionMode="Single"
                             SelectedItem="{Binding SelectedCustomer}"
                             FontFamily="Dubai"
                             FontSize="16"
                             telerik:StyleManager.Theme="Fluent">

            <telerik:RadGridView.Columns>
                <telerik:GridViewDataColumn Header="الرقم"
                                            DataMemberBinding="{Binding Id}"
                                            Width="1*"
                                            IsReadOnly="True"/>
                <telerik:GridViewDataColumn Header="الاسم"
                                            DataMemberBinding="{Binding Name}"
                                            Width="2*"/>
                <telerik:GridViewDataColumn Header="الهاتف"
                                            DataMemberBinding="{Binding Phone}"
                                            Width="1.5*"/>
                <telerik:GridViewDataColumn Header="البريد الإلكتروني"
                                            DataMemberBinding="{Binding Email}"
                                            Width="2*"/>
                <telerik:GridViewDataColumn Header="العنوان"
                                            DataMemberBinding="{Binding Address}"
                                            Width="2*"/>
                <telerik:GridViewDataColumn Header="" Width="Auto">
                    <telerik:GridViewDataColumn.CellTemplate>
                        <DataTemplate>
                            <telerik:RadButton Content="حذف"
                                               Width="60"
                                               Height="30"
                                               Command="{Binding DataContext.DeleteCommand,
                                                RelativeSource={RelativeSource AncestorType=UserControl}}"
                                               CommandParameter="{Binding}" />
                        </DataTemplate>
                    </telerik:GridViewDataColumn.CellTemplate>
                </telerik:GridViewDataColumn>
            </telerik:RadGridView.Columns>
        </telerik:RadGridView>

        <!-- Pagination -->
        <telerik:RadDataPager Grid.Row="2"
                              Margin="0,10,0,0"
                              PageIndex="{Binding PageIndex, Mode=TwoWay}"
                              PageSize="{Binding PageSize}"
                              ItemCount="{Binding TotalCount}"
                              DisplayMode="FirstLastPreviousNextNumeric"
                              HorizontalAlignment="Center"
                              telerik:StyleManager.Theme="Fluent"/>
    </Grid>
</UserControl>
